% BSD 3-Clause License
%
% Copyright (c) 2023 Quux System and Technology. All rights reserved.
%
% Redistribution and use in source and binary forms, with or without
% modification, are permitted provided that the following conditions are met:
%
% 1. Redistributions of source code must retain the above copyright notice, this
%    list of conditions and the following disclaimer.
%
% 2. Redistributions in binary form must reproduce the above copyright notice,
%    this list of conditions and the following disclaimer in the documentation
%    and/or other materials provided with the distribution.
%
% 3. Neither the name of the copyright holder nor the names of its
%    contributors may be used to endorse or promote products derived from
%    this software without specific prior written permission.
%
% THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
% AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
% IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
% DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
% FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
% DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
% SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
% CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
% OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
% OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
%
\RequirePackage[l2tabu, orthodox]{nag}
\documentclass[%
	coverheight=210mm,
	coverwidth=148mm,
	% Double A Uncoated Paper
	%  Weight      Thickness    Description
	% --------------------------------------------------------------------
	%  70 gsm    93.6 micron    Copy paper for everyday use
	%  80 gsm   103.2 micron    Premium multi-purpose copy paper
	%
	% The spine width calculation
	% ( 342 / 2 ) * 103.2 micron = 17.6472 mm
	spinewidth=17.6472mm, % For 80 gsm copy paper
	flapwidth=0mm,
	wrapwidth=0mm,
	bleedwidth=3mm,
	marklength=12mm,
	foldingmargin=true,
	markthick=0.4pt,
	markcolor=black,
	pagecolor=white,
	trimmed=false,
	trimmingcolor=white
]{bookcover}
\input{git-revision.tex}
\usepackage{hyperref}
	\hypersetup{
		unicode=true,
		pdfduplex={DuplexFlipShortEdge},
		pdfprintscaling={AppDefault},
		pdfpicktraybypdfsize={true},
		pdfcreator={XeLaTeX},
		pdfproducer={Quux System and Technology},
		pdftoolbar={true},
		pdftitle={四川菜谱1972重制版},
		pdfsubject={封面设计},
		pdfauthor={泥偶},
		pdfkeywords={封面},
		pdflang={zh-CN},
		pdfinfo={
			GitCommitName={\gitcommitname},
			GitCommitHash={\gitcommithash},
			GitCommitterDate={\gitcommitterdate},
			PDFBuildHost={\pdfbuildhost}
		},
		hidelinks
	}
\usepackage[zihao=5]{ctexsize}
\usepackage[quiet]{xeCJK}
	\xeCJKsetup{
		AutoFallBack=true,
		CJKecglue={\,}
	}
	\setCJKmainfont[
		BoldFont=Noto Serif CJK SC SemiBold,
	]{Noto Serif CJK SC}
	\setCJKsansfont[
		BoldFont=Noto Sans CJK SC Bold
	]{Noto Sans CJK SC Medium}
	\setCJKmonofont[
		BoldFont=Noto Sans Mono CJK SC Bold
	]{Noto Sans Mono CJK SC}
\usepackage{setspace}
\usepackage{pdfpages}

\begin{document}
\begin{bookcover}

\newbookcoverpart{bg front and flap and spine and more}{%
	\setpartposx{\marklength+\bleedwidth+\flapwidth+\wrapwidth+\coverwidth-51.496bp}%
	\setpartposy{\marklength}%
	\setpartheight{\coverheight+2\bleedwidth}%
	\setpartwidth{51.496bp+\spinewidth+\coverwidth+\wrapwidth+\flapwidth+\bleedwidth}%
}%

\newbookcoverpart{back mark}{%
	\setpartposx{0bp}%
	\setpartposy{\marklength+\bleedwidth}%
	\setpartheight{\coverheight}%
	\setpartwidth{\marklength}%
}

\newbookcoverpart{front mark}{%
	\setpartposx{\marklength+2\bleedwidth+2\flapwidth+2\wrapwidth+2\coverwidth+\spinewidth}%
	\setpartposy{\marklength+\bleedwidth}%
	\setpartheight{\coverheight}%
	\setpartwidth{\marklength}%
}

\definecolor{pantone warm gray 1 c}{cmyk}{0 0 0.01 0.1}%

\bookcovercomponent{color}{bg front and flap and spine and more}{%
	pantone warm gray 1 c%
}%

\bookcovercomponent{normal}{front}{%
	\includegraphics[page=1]{front-cover.pdf}%
}%

\bookcovercomponent{normal}{back}{%
	\includegraphics[page=1]{back-cover.pdf}%
}%

\bookcovercomponent{normal}{spine}{%
\singlespacing%
\setlength{\parindent}{0pt}%
\setlength{\parskip}{0\baselineskip}%
\null%
\vspace{26.025736mm}%
\begin{center}%
\begingroup%
\huge\rmfamily\bfseries%
\setstretch{.875}%
四\\ 川\\ 菜\\ 谱

\endgroup%
\vfill%
\null\hspace{2.71616pt}%
\includegraphics[height=10mm, width=10mm]{quux-logo.pdf}%
{\sffamily\tiny\kern-.5em\lower.5ex\hbox{\texttrademark}}%
\end{center}%
\vspace{26.025736mm}%
}%

% Color bars

\bookcovercomponent{normal}{above back}{%
\singlespacing%
\Large\sffamily%
\null%
\vspace{-2\baselineskip}%
\vfill%
\hspace{1em}%
\textcolor[cmyk]{0,0,0,1}{\makebox[1em]{\tiny 40\%}}%
\textcolor[cmyk]{0,0,0,1}{\makebox[1em]{\tiny 80\%}}%
\textcolor[cmyk]{0,0,0,1}{\makebox[1em]{\tiny 100\%}}%
\hspace{1em}%
\textcolor[cmyk]{1,0,0,0}{\makebox[1em]{\tiny C}}%
\textcolor[cmyk]{0,1,0,0}{\makebox[1em]{\tiny M}}%
\textcolor[cmyk]{0,0,1,0}{\makebox[1em]{\tiny Y}}%
\textcolor[cmyk]{1,1,0,0}{\makebox[1em]{\tiny CM}}%
\textcolor[cmyk]{0,1,1,0}{\makebox[1em]{\tiny MY}}%
\textcolor[cmyk]{1,0,1,0}{\makebox[1em]{\tiny CY}}%
\textcolor[cmyk]{1,1,1,0}{\makebox[1em]{\tiny CMY}}%
\textcolor[cmyk]{0,0,0,1}{\makebox[1em]{\tiny K}}%
\hspace{1em}%
\textcolor[cmyk]{1,0,0,0}{\raise1.3ex\hbox{%
	\makebox[1em]{\tiny 75C}%
}}\kern-1em%
\textcolor[cmyk]{0,1,0,0}{\raise.5ex\hbox{%
	\makebox[1em]{\tiny 62M}%
}}\kern-1em%
\textcolor[cmyk]{0,0,1,0}{\lower.3ex\hbox{%
	\makebox[1em]{\tiny 60Y}%
}}%
\hspace{1em}%
\textcolor[cmyk]{1,0,0,0}{\raise.5ex\hbox{%
	\makebox[1em]{\tiny 75C}%
}}\kern-1em%
\textcolor[cmyk]{0,1,0,0}{\lower.3ex\hbox{%
	\makebox[1em]{\tiny 75M}%
}}%
\textcolor[cmyk]{0,1,0,0}{\raise.5ex\hbox{%
	\makebox[1em]{\tiny 75M}%
}}\kern-1em%
\textcolor[cmyk]{0,0,1,0}{\lower.3ex\hbox{%
	\makebox[1em]{\tiny 75Y}%
}}%
\textcolor[cmyk]{1,0,0,0}{\raise.5ex\hbox{%
	\makebox[1em]{\tiny 75C}%
}}\kern-1em%
\textcolor[cmyk]{0,0,1,0}{\lower.3ex\hbox{%
	\makebox[1em]{\tiny 75Y}%
}}%
\hspace{1em}%
\textcolor[cmyk]{1,0,0,0}{\raise.5ex\hbox{%
	\makebox[1em]{\tiny 30C}%
}}\kern-1em%
\textcolor[cmyk]{0,0,0,1}{\lower.3ex\hbox{%
	\makebox[1em]{\tiny 30K}%
}}%
\textcolor[cmyk]{0,1,0,0}{\raise.5ex\hbox{%
	\makebox[1em]{\tiny 30M}%
}}\kern-1em%
\textcolor[cmyk]{0,0,0,1}{\lower.3ex\hbox{%
	\makebox[1em]{\tiny 30K}%
}}%
\textcolor[cmyk]{0,0,1,0}{\raise.5ex\hbox{%
	\makebox[1em]{\tiny 30Y}%
}}\kern-1em%
\textcolor[cmyk]{0,0,0,1}{\lower.3ex\hbox{%
	\makebox[1em]{\tiny 30K}%
}}%
\\
\null%
\hspace{1em}%
\textcolor[cmyk]{0,0,0,.4}{\rule{1em}{1em}}%
\textcolor[cmyk]{0,0,0,.8}{\rule{1em}{1em}}%
\textcolor[cmyk]{0,0,0,1}{\rule{1em}{1em}}%
\hspace{1em}%
\textcolor[cmyk]{1,0,0,0}{\rule{1em}{1em}}% C
\textcolor[cmyk]{0,1,0,0}{\rule{1em}{1em}}% M
\textcolor[cmyk]{0,0,1,0}{\rule{1em}{1em}}% Y
\textcolor[cmyk]{1,1,0,0}{\rule{1em}{1em}}% CM
\textcolor[cmyk]{0,1,1,0}{\rule{1em}{1em}}% MY
\textcolor[cmyk]{1,0,1,0}{\rule{1em}{1em}}% CY
\textcolor[cmyk]{1,1,1,0}{\rule{1em}{1em}}% CMY
\textcolor[cmyk]{0,0,0,1}{\rule{1em}{1em}}% K
\hspace{1em}%
\textcolor[cmyk]{.75,.62,.6,0}{\rule{1em}{1em}}%
\hspace{1em}%
\textcolor[cmyk]{.75,.75,0,0}{\rule{1em}{1em}}%
\textcolor[cmyk]{0,.75,.75,0}{\rule{1em}{1em}}%
\textcolor[cmyk]{.75,0,.75,0}{\rule{1em}{1em}}%
\hspace{1em}%
\textcolor[cmyk]{.3,0,0,.3}{\rule{1em}{1em}}%
\textcolor[cmyk]{0,.3,0,.3}{\rule{1em}{1em}}%
\textcolor[cmyk]{0,0,.3,.3}{\rule{1em}{1em}}%
\hfill%
\includegraphics[page=1]{position-indicator.pdf}%
\hspace{1em}
}%

\bookcovercomponent{normal}{above front}{%
\Large\sffamily%
\null%
\vspace{-2\baselineskip}%
\vfill%
\hfill%
\textcolor[cmyk]{1,0,0,0}{\makebox[1em]{\tiny 25\%}}%
\textcolor[cmyk]{1,0,0,0}{\makebox[1em]{\tiny 50\%}}%
\textcolor[cmyk]{1,0,0,0}{\makebox[1em]{\tiny 75\%}}%
\textcolor[cmyk]{1,0,0,0}{\makebox[1em]{\tiny 100\%}}%
\textcolor[cmyk]{0,1,0,0}{\makebox[1em]{\tiny 25\%}}%
\textcolor[cmyk]{0,1,0,0}{\makebox[1em]{\tiny 50\%}}%
\textcolor[cmyk]{0,1,0,0}{\makebox[1em]{\tiny 75\%}}%
\textcolor[cmyk]{0,1,1,0}{\makebox[1em]{\tiny 100\%}}%
\textcolor[cmyk]{0,0,1,0}{\makebox[1em]{\tiny 25\%}}%
\textcolor[cmyk]{0,0,1,0}{\makebox[1em]{\tiny 50\%}}%
\textcolor[cmyk]{0,0,1,0}{\makebox[1em]{\tiny 75\%}}%
\textcolor[cmyk]{0,0,1,0}{\makebox[1em]{\tiny 100\%}}%
\textcolor[cmyk]{0,0,0,1}{\makebox[1em]{\tiny 25\%}}%
\textcolor[cmyk]{0,0,0,1}{\makebox[1em]{\tiny 50\%}}%
\textcolor[cmyk]{0,0,0,1}{\makebox[1em]{\tiny 75\%}}%
\textcolor[cmyk]{0,0,0,1}{\makebox[1em]{\tiny 100\%}}%
\textcolor[cmyk]{1,1,1,0}{\makebox[1em]{\tiny 25\%}}%
\textcolor[cmyk]{1,1,1,0}{\makebox[1em]{\tiny 50\%}}%
\textcolor[cmyk]{1,1,1,0}{\makebox[1em]{\tiny 75\%}}%
\textcolor[cmyk]{1,1,1,0}{\makebox[1em]{\tiny 100\%}}%
\hspace{1em}
\\
\null%
\hfill%
\textcolor[cmyk]{.25,0,0,0}{\rule{1em}{1em}}%
\textcolor[cmyk]{.5,0,0,0}{\rule{1em}{1em}}%
\textcolor[cmyk]{.75,0,0,0}{\rule{1em}{1em}}%
\textcolor[cmyk]{1,0,0,0}{\rule{1em}{1em}}%
\textcolor[cmyk]{0,.25,0,0}{\rule{1em}{1em}}%
\textcolor[cmyk]{0,.5,0,0}{\rule{1em}{1em}}%
\textcolor[cmyk]{0,.75,0,0}{\rule{1em}{1em}}%
\textcolor[cmyk]{0,1,0,0}{\rule{1em}{1em}}%
\textcolor[cmyk]{0,0,.25,0}{\rule{1em}{1em}}%
\textcolor[cmyk]{0,0,.5,0}{\rule{1em}{1em}}%
\textcolor[cmyk]{0,0,.75,0}{\rule{1em}{1em}}%
\textcolor[cmyk]{0,0,1,0}{\rule{1em}{1em}}%
\textcolor[cmyk]{0,0,0,.25}{\rule{1em}{1em}}%
\textcolor[cmyk]{0,0,0,.5}{\rule{1em}{1em}}%
\textcolor[cmyk]{0,0,0,.75}{\rule{1em}{1em}}%
\textcolor[cmyk]{0,0,0,1}{\rule{1em}{1em}}%
\textcolor[cmyk]{.25,.25,.25,0}{\rule{1em}{1em}}%
\textcolor[cmyk]{.5,.5,.5,0}{\rule{1em}{1em}}%
\textcolor[cmyk]{.75,.75,.75,0}{\rule{1em}{1em}}%
\textcolor[cmyk]{1,1,1,0}{\rule{1em}{1em}}%
\hspace{1em}
}%

\bookcovercomponent{normal}{below back}{%
\Large%
\hfill%
\textcolor[cmyk]{0,0,0,.1}{\rule{1em}{1em}}% 10% K
\textcolor[cmyk]{0,0,0,.2}{\rule{1em}{1em}}% 20% K
\textcolor[cmyk]{0,0,0,.3}{\rule{1em}{1em}}% 30% K
\textcolor[cmyk]{0,0,0,.4}{\rule{1em}{1em}}% 40% K
\textcolor[cmyk]{0,0,0,.5}{\rule{1em}{1em}}% 50% K
\textcolor[cmyk]{0,0,0,.6}{\rule{1em}{1em}}% 60% K
\textcolor[cmyk]{0,0,0,.7}{\rule{1em}{1em}}% 70% K
\textcolor[cmyk]{0,0,0,.8}{\rule{1em}{1em}}% 80% K
\textcolor[cmyk]{0,0,0,.9}{\rule{1em}{1em}}% 90% K
\textcolor[cmyk]{0,0,0,1}{\rule{1em}{1em}}% 100% K
\hspace{1em}%
\includegraphics[page=1]{position-indicator.pdf}%
\hspace{1em}
}%

\bookcovercomponent{normal}{below front}{%
\Large%
\hfill%
\textcolor[cmyk]{1,0,0,0}{\rule{1em}{1em}}% C
\textcolor[cmyk]{0,1,0,0}{\rule{1em}{1em}}% M
\textcolor[cmyk]{0,0,1,0}{\rule{1em}{1em}}% Y
\textcolor[cmyk]{1,1,0,0}{\rule{1em}{1em}}% CM
\textcolor[cmyk]{0,1,1,0}{\rule{1em}{1em}}% MY
\textcolor[cmyk]{1,0,1,0}{\rule{1em}{1em}}% CY
\textcolor[cmyk]{1,1,1,0}{\rule{1em}{1em}}% CMY
\textcolor[cmyk]{0,0,0,1}{\rule{1em}{1em}}% K
\hspace{1em}%
\includegraphics[page=1]{position-indicator.pdf}%
\hspace{1em}
}%

% Metadata

\bookcovercomponent{normal}{above front}{%
\singlespacing%
\footnotesize\sffamily%
\null%
\vfill%
\CJKfontspec{Noto Sans CJK SC DemiLight}%
\hspace{.875em}四川菜谱1972重制版\hspace{.875em}封面
\vspace{.75em}
}%

\bookcovercomponent{normal}{below front}{%
\footnotesize\rmfamily%
\singlespacing%
\setlength{\parindent}{0pt}%
\setlength{\parskip}{.3125\baselineskip}%
\vspace{-2.375\baselineskip}
\begin{tabbing}%
\hspace{1mm}\= \hspace{9.5625em}\= \kill%
\>\textsc{git} commit name:       \>\texttt{\gitcommitname}\\
\>\textsc{git} commit hash:       \>\texttt{\gitcommithash}
\end{tabbing}
}%

\bookcovercomponent{normal}{below back}{%
\footnotesize\rmfamily%
\singlespacing%
\setlength{\parindent}{0pt}%
\setlength{\parskip}{.3125\baselineskip}%
\vspace{-2.375\baselineskip}
\begin{tabbing}%
\hspace{1mm}\= \hspace{9.5625em}\= \kill%
\>\textsc{git} committer date:    \>\texttt{\gitcommitterdate}\\
\>\textsc{pdf} build date:        \>\texttt{\pdfbuilddate}\\
\>\textsc{pdf} build host:        \>\texttt{\pdfbuildhost}
\end{tabbing}
}%

\bookcovercomponent{normal}{back mark}{%
\Large%
\vspace{1em}%
\hfill%
\includegraphics[page=1]{position-indicator.pdf}%
\vspace{1em}
\vfill%
\vspace{1em}%
\hfill%
\includegraphics[page=1]{position-indicator.pdf}%
\vspace{1em}
}%

\bookcovercomponent{normal}{front mark}{%
\Large%
\vspace{1em}%
\includegraphics[page=1]{position-indicator.pdf}%
}%

\end{bookcover}
\end{document}

% vim: filetype=tex noautoindent nojoinspaces
% vim: fileencoding=utf-8 formatoptions+=m
% vim: textwidth=78 tabstop=4 shiftwidth=4 softtabstop=4
